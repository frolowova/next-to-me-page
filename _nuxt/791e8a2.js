(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{399:function(t,e,n){"use strict";n.r(e);n(46);var r=n(84),o={props:{sizeC:Number},computed:Object(r.b)(["imageBase64"])},c=n(45),l=n(50),d=n.n(l),h=n(404),v=n(240),component=Object(c.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-avatar",{attrs:{color:"grey lighten-2",size:this.sizeC}},[e("v-img",{attrs:{src:this.imageBase64,alt:"ava"}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;d()(component,{VAvatar:h.a,VImg:v.a})},437:function(t,e,n){"use strict";n(16),n(17);e.a={methods:{loadAndPreviewImages:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(e,r){var canvas=document.createElement("canvas"),img=document.createElement("img");img.addEventListener("load",(function(){var e=img.width,o=img.height,c=(null==n?void 0:n.width)||200,l=(null==n?void 0:n.height)||200;e>o?e>c&&(o=Math.round(o*=c/e),e=c):o>l&&(e=Math.round(e*=l/o),o=l),canvas.width=e,canvas.height=o,canvas.getContext("2d").drawImage(img,0,0,e,o);var d=canvas.toDataURL("image/jpeg",.8);t.attachedFiles.push({url:d,file:r})})),img.addEventListener("error",(function(){throw new Error("Compressed img error!")})),img.src=e};e.forEach((function(t){if("image/jpeg"===t.type||"image/png"===t.type){var e=new FileReader;e.addEventListener("load",(function(e){var n=e.target.result;r(n,t)})),e.readAsDataURL(t)}}))}}}},455:function(t,e,n){"use strict";n.r(e);var r={props:{title:String}},o=n(45),component=Object(o.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("p",{staticClass:"body-1 pa-0 ma-0"},[this._v(this._s(this.title))])}),[],!1,null,null,null);e.default=component.exports},584:function(t,e,n){"use strict";n.r(e);n(11),n(18),n(16),n(51),n(27),n(28),n(19),n(17);var r=n(0),o=n(399),c=n(455),l=n(437),d=n(55),h=n(38),v=n(84);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w={components:{avatar:o.default,SubTitleText:c.default},mixins:[l.a],headerData:{title:"Настройки профиля"},btnValue:{value:""},data:function(){return{loading:!0,update:!1,shown:!0,title:" ",newUserName:"",selectedImage:[],attachedFiles:[],isDarkTheme:JSON.parse(localStorage.getItem("isDark")||!1)}},methods:{getUserInfo:function(){this.$store.dispatch(d.GET_USER_INFO)},sendUserInfo:function(){var t=this;this.$store.dispatch(d.SEND_USER_INFO,{userName:this.newUserName}).then((function(e){return t.$store.dispatch(d.GET_USER_INFO)})).catch((function(t){return console.log(t)}))},updPhoto:function(){var t=this;this.$store.dispatch(d.SEND_USER_INFO,{imageBase64:this.src}).then((function(e){return t.$store.dispatch(d.GET_USER_INFO)})).catch((function(t){return console.log(t)}))},loadImageClickHandler:function(){this.$refs.fileInput.$children[0].$el.click()},onChangeFile:function(){var t=[this.selectedImage];this.attachedFiles=[],this.loadAndPreviewImages(t)},changePass:function(){this.$router.push("/reset")},authLogOut:function(){this.$store.dispatch(h.AUTH_LOGOUT,{}).catch((function(t){return console.log(t)})),this.$router.push("/login")}},mounted:function(){this.getUserInfo()},computed:f(f({},Object(v.b)(["userName","email"])),{},{darkTheme:{get:function(){return this.isDarkTheme},set:function(t){this.$vuetify.theme.dark=t,localStorage.setItem("isDark",this.$vuetify.theme.dark)}},src:function(){var t=this.attachedFiles.map((function(img){return img.url}));return 1===t.length?t[0]:""}})},_=n(45),y=n(50),x=n.n(y),O=n(357),k=n(366),I=n(427),j=n(543),C=n(358),E=n(587),N=n(391),component=Object(_.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("div",{staticClass:"d-flex justify-center mb-10"},[n("avatar",{attrs:{sizeC:200}}),t._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{color:"primary",icon:""},on:{click:function(e){return e.preventDefault(),t.loadImageClickHandler(e)}}},[n("v-icon",[t._v("mdi-pencil-outline")])],1),t._v(" "),n("v-file-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{accept:"image/x-png, image/jpeg"},on:{change:function(e){t.onChangeFile(),t.loading=!t.loading,t.update=!t.update}},model:{value:t.selectedImage,callback:function(e){t.selectedImage=e},expression:"selectedImage"}}),t._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.update,expression:"update"}],attrs:{icon:"",color:"primary"},on:{click:function(e){t.updPhoto(),t.update=!t.update,t.loading=!t.loading}}},[n("v-icon",[t._v("mdi-check")])],1)],1),t._v(" "),n("h2",{staticClass:"subtitle-1 primary--text pa-2 body-2"},[t._v("\n    Настройки профиля\n  ")]),t._v(" "),n("div",{staticClass:"d-flex align-start pa-2"},[n("sub-title-text",{attrs:{title:"Имя"}}),t._v(" "),n("v-text-field",{staticClass:"pa-0 ma-0",attrs:{label:t.userName,type:"text","single-line":"",reverse:"",loading:"0"},on:{click:function(e){t.shown=!t.shown}},model:{value:t.newUserName,callback:function(e){t.newUserName=e},expression:"newUserName"}}),t._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.shown,expression:"!shown"}],attrs:{icon:"",color:"primary"},on:{click:function(e){t.sendUserInfo(),t.shown=!0}}},[n("v-icon",[t._v("mdi-check")])],1)],1),t._v(" "),n("div",{staticClass:"d-flex align-start justify-space-between pa-2"},[n("sub-title-text",{attrs:{title:"Почта"}}),t._v(" "),n("p",[t._v(t._s(t.email))])],1),t._v(" "),n("v-divider"),t._v(" "),n("h2",{staticClass:"subtitle-1 primary--text pa-2 body-2"},[t._v("\n    Общие настройки\n  ")]),t._v(" "),n("div",{staticClass:"d-flex justify-space-between pa-2 pr-0"},[n("sub-title-text",{attrs:{title:"Вкл. push-уведомления"}}),t._v(" "),n("v-switch",{staticClass:"ma-0 pa-0",attrs:{color:"primary",inset:"",disabled:""}})],1),t._v(" "),n("div",{staticClass:"d-flex justify-space-between pa-2 pr-0"},[n("sub-title-text",{attrs:{title:"Вкл. темную тему"}}),t._v(" "),n("v-switch",{staticClass:"ma-0 pa-0",attrs:{color:"primary",inset:""},model:{value:t.darkTheme,callback:function(e){t.darkTheme=e},expression:"darkTheme"}})],1),t._v(" "),n("div",[n("v-btn",{staticClass:"text-capitalize body-1",attrs:{text:"",color:"primary"},on:{click:t.changePass}},[n("v-icon",[t._v("mdi-pencil-outline")]),t._v("\n      Изменить пароль\n    ")],1)],1),t._v(" "),n("div",{staticClass:"d-flex justify-center"},[n("v-btn",{staticClass:"text-capitalize body-1",attrs:{text:""},on:{click:t.authLogOut}},[t._v("\n      Выйти\n    ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports;x()(component,{Avatar:n(399).default,SubTitleText:n(455).default}),x()(component,{VBtn:O.a,VContainer:k.a,VDivider:I.a,VFileInput:j.a,VIcon:C.a,VSwitch:E.a,VTextField:N.a})}}]);