(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{131:function(e,t,r){var content=r(283);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(25).default)("026b33a3",content,!0,{sourceMap:!1})},133:function(e,t,r){var content=r(292);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(25).default)("429ce707",content,!0,{sourceMap:!1})},134:function(e,t,r){var content=r(294);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(25).default)("268bcbea",content,!0,{sourceMap:!1})},135:function(e,t,r){var content=r(323);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(25).default)("15259e72",content,!0,{sourceMap:!1})},136:function(e,t,r){var content=r(335);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(25).default)("e1ec8a6e",content,!0,{sourceMap:!1})},162:function(e,t,r){"use strict";r.r(t);r(51),r(36);var n,o,c,f,l,d,m=r(2),h=r(0),v=r(92),S=r(85),O=r(34),_=(n={},Object(h.a)(n,O.GET_MESSAGES,(function(e,t){e.messages=t})),Object(h.a)(n,O.LOAD_AVATARS,(function(e,t){e.avatars=t})),Object(h.a)(n,O.CHANGE_LIST_TITLE,(function(e,title){e.title=title})),Object(h.a)(n,O.SET_SORTED_MESSAGES,(function(e,t){e.messages=t})),n),E=(o={},Object(h.a)(o,O.GET_MESSAGES,(d=Object(m.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,v.a.getMessages(0,100);case 3:return n=e.sent,r(O.GET_MESSAGES,n.data),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})),Object(h.a)(o,O.SEND_MESSAGE,(l=Object(m.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.commit,e.next=3,v.a.sendMessage(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)})),Object(h.a)(o,O.LOAD_AVATARS,(f=Object(m.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,o=n.messages.map((function(e){return e.from})),e.next=4,S.a.getUserInfo(o);case 4:return c=e.sent,r(O.LOAD_AVATARS,c.data),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})),Object(h.a)(o,O.GET_TOP_MESSAGES,(c=Object(m.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,v.a.getTopMessages();case 3:return n=e.sent,r(O.GET_MESSAGES,n.data),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})),Object(h.a)(o,O.CHANGE_LIST_TITLE,(function(e,title){(0,e.commit)(O.CHANGE_LIST_TITLE,title)})),Object(h.a)(o,O.SET_SORTED_MESSAGES,(function(e,t){(0,e.commit)(O.SET_SORTED_MESSAGES,t)})),o);t.default={state:function(){return{messages:[],avatars:[],title:"Рядом"}},getters:{},actions:E,mutations:_}},163:function(e,t,r){"use strict";r.r(t);r(36);var n,o,c,f,l,d=r(2),m=r(0),h=r(85),v=r(55),S=r(38),O=(n={},Object(m.a)(n,v.GET_USER_INFO,(function(e,t){e.userInfo=t})),Object(m.a)(n,v.SEND_USER_INFO,(function(e,t){console.log(t),e.userInfo=t})),Object(m.a)(n,S.AUTH_LOGOUT,(function(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("nextId")})),Object(m.a)(n,v.SET_AUTH_DATA,(function(e,t){var r=t.id,n=t.login;e.id=r,e.login=n})),n),_=(o={},Object(m.a)(o,v.GET_USER_INFO,(l=Object(d.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,e.next=3,h.a.getUserInfo([n.id]);case 3:o=e.sent,r("GET_USER_INFO",o.data[0]);case 5:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})),Object(m.a)(o,v.SEND_USER_INFO,(f=Object(d.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.commit,e.next=3,h.a.sendUserInfo(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})),Object(m.a)(o,S.AUTH_LOGOUT,(c=Object(d.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,e.abrupt("return",r(S.AUTH_LOGOUT));case 2:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})),Object(m.a)(o,v.SET_AUTH_DATA,(function(e,t){(0,e.commit)(v.SET_AUTH_DATA,t)})),o);t.default={state:function(){return{id:localStorage.getItem("nextId")||null,userInfo:{userName:"",imageBase64:"",userId:""},email:localStorage.getItem("login"),darkTheme:JSON.parse(localStorage.getItem("isDark")||!1)}},getters:{userId:function(e){return e.id},userName:function(e){return e.userInfo.userName},imageBase64:function(e){return e.userInfo.imageBase64},darkTheme:function(e){return e.darkTheme},email:function(e){return e.email}},actions:_,mutations:O}},164:function(e,t,r){"use strict";r.r(t);var n={props:{btnValue:{type:Object}},data:function(){return{value:""}},mounted:function(){this.value=this.btnValue.value},watch:{value:function(e){this.value=this.btnValue.value}}},o=(r(293),r(45)),c=r(50),f=r.n(c),l=r(365),d=r(357),m=r(358),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"footer-menu"},[r("v-bottom-navigation",{staticClass:"footer-menu_btns",attrs:{color:"primary","v-model":e.value}},[r("div",{staticClass:"footer-menu_container"},[r("v-btn",{attrs:{value:"home",to:"/home",nuxt:""}},[r("span",[e._v("Главная")]),e._v(" "),r("v-icon",[e._v("mdi-home")])],1),e._v(" "),r("v-btn",{attrs:{value:"notifications",to:"/notifications",nuxt:""}},[r("span",[e._v("Уведомления")]),e._v(" "),r("v-icon",[e._v("mdi-bell")])],1),e._v(" "),r("v-btn",{attrs:{value:"profile",to:"/profile",nuxt:""}},[r("span",[e._v("Профиль")]),e._v(" "),r("v-icon",[e._v("mdi-account")])],1),e._v(" "),r("v-btn",{attrs:{value:"tag-create",to:"/tag-create",nuxt:""}},[r("span",[e._v("Тегнуть")]),e._v(" "),r("v-icon",[e._v("mdi-pencil")])],1)],1)])],1)}),[],!1,null,"6a09f0e3",null);t.default=component.exports;f()(component,{VBottomNavigation:l.a,VBtn:d.a,VIcon:m.a})},165:function(e,t,r){"use strict";r.r(t);var n={props:{headerData:{type:Object}}},o=(r(322),r(45)),c=r(50),f=r.n(c),l=r(366),d=r(161),m=r(159),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.headerData?r("div",{staticClass:"app-header"},[!e.headerData.subtitle_1&!e.headerData.subtitle_2?r("v-toolbar",{staticClass:"header",attrs:{height:"56px",elevation:"0"}},[r("v-container",{staticStyle:{"max-width":"900px"}},[r("v-toolbar-title",{staticClass:"header-title"},[r("span",[e._v(e._s(e.headerData.title))])])],1)],1):r("v-toolbar",{staticClass:"header",attrs:{height:"112px",elevation:"0"}},[r("v-container",{staticStyle:{"max-width":"900px"}},[r("v-toolbar-title",{staticClass:"header-title"},[r("span",{staticStyle:{"padding-bottom":"6px"}},[e._v(e._s(e.headerData.title))])]),e._v(" "),r("div",{staticClass:"header-title_subtitle",staticStyle:{"padding-top":"20px"}},[r("span",[e._v(e._s(e.headerData.subtitle_1))]),e._v(" "),r("span",[e._v(e._s(e.headerData.subtitle_2))])])],1)],1)],1):e._e()}),[],!1,null,"0790f288",null);t.default=component.exports;f()(component,{VContainer:l.a,VToolbar:d.a,VToolbarTitle:m.a})},166:function(e,t,r){"use strict";r.r(t);r(30),r(36);var n=r(2),o=r(0),c=(r(7),r(54),r(12),r(10)),f=r(20),l=r(21),d=r(13),m=r(6);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(m.a)(e);if(t){var o=Object(m.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var v,S,O,_,E,T,x,R,y=new(function(e){Object(l.a)(S,e);var t,r,o,d,m,v=h(S);function S(){return Object(c.a)(this,S),v.call(this)}return Object(f.a)(S,[{key:"login",value:(m=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/auth/login",t);case 2:return r=e.sent,this.updateAuthHeader(r.data.accessToken),data=r.data,e.abrupt("return",data);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"signup",value:(d=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/auth/register",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"confirm",value:(o=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/auth/confirm",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"resetPassword",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/auth/password/reset",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setNewPassword",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/auth/password/set",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),S}(r(78).a)),w=r(38),I=r(55),j=(v={},Object(o.a)(v,w.LOGIN_SUCCESS,(function(e,t){var r=t.response,n=t.login;localStorage.setItem("accessToken",r.accessToken),localStorage.setItem("refreshToken",r.refreshToken),localStorage.setItem("nextId",r.id),localStorage.setItem("login",n),e.username=r.username})),Object(o.a)(v,w.AUTH_LOGOUT,(function(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("nextId"),localStorage.removeItem("login")})),v),k=(S={},Object(o.a)(S,w.AUTH_LOGIN,(R=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,o=t.dispatch,e.next=3,y.login(r);case 3:return c=e.sent,n(w.LOGIN_SUCCESS,{response:c,login:r.login}),o(I.SET_AUTH_DATA,{id:c.id,login:r.login},{root:!0}),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)}))),function(e,t){return R.apply(this,arguments)})),Object(o.a)(S,w.AUTH_SIGNUP,(x=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.commit,r.name,n=r.email,e.next=4,y.signup({login:n,redirectUrl:"http://nexttome.ru/auth-confirm"});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return x.apply(this,arguments)})),Object(o.a)(S,w.AUTH_LOGOUT,(T=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,e.abrupt("return",r(w.AUTH_LOGOUT));case 2:case"end":return e.stop()}}),e)}))),function(e){return T.apply(this,arguments)})),Object(o.a)(S,w.SIGNUP_CONFIRM,(E=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.commit,e.next=3,y.confirm(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return E.apply(this,arguments)})),Object(o.a)(S,w.RESET_PASSWORD_ATTEMPT,(_=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.commit,n=r.login,e.next=4,y.resetPassword({login:n,redirectUrl:"http://nexttome.ru/reset-confirm"});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)})),Object(o.a)(S,w.RESET_PASSWORD_CONFIRM,(O=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var code,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.commit,code=r.code,n=r.password,o=r.userId,e.next=4,y.setNewPassword({code:code,NewPassword:n,userId:o});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return O.apply(this,arguments)})),S);t.default={state:function(){return{username:null,login:localStorage.getItem("login")||null}},getters:{},actions:k,mutations:j}},167:function(e,t,r){"use strict";r.r(t),r.d(t,"state",(function(){return I})),r.d(t,"mutations",(function(){return j})),r.d(t,"actions",(function(){return k})),r.d(t,"getters",(function(){return A}));r(51),r(36);var n=r(2),o=r(0),c=r(23),f=(r(32),r(7),r(54),r(12),r(10)),l=r(20),d=r(21),m=r(13),h=r(6);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(m.a)(this,r)}}var S,O,_,E,T,x,R=new(function(e){Object(d.a)(m,e);var t,r,o,c=v(m);function m(){return Object(f.a)(this,m),c.call(this)}return Object(l.a)(m,[{key:"sendComment",value:(o=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/message/comments/send",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getComments",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:0,n=c.length>2&&void 0!==c[2]?c[2]:2147483647,e.next=4,this.request("get","/message/comments/get?messageId=".concat(t,"&skip=").concat(r,"&take=").concat(n));case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getUserComments",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("get","/api/message/comments/get/from/user");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),m}(r(78).a)),y=r(85),w=r(92),I=function(){return{comments:[],images:[],commentsAvatars:[],isOpen:!1}},j=(S={},Object(o.a)(S,c.GET_COMMENTS,(function(e,t){e.comments=t})),Object(o.a)(S,c.GET_IMAGES,(function(e,t){e.images.push(t)})),Object(o.a)(S,c.RESET_IMAGES,(function(e){e.images=[]})),Object(o.a)(S,c.LOAD_COMMENT_AVATARS,(function(e,t){e.commentsAvatars=t})),Object(o.a)(S,c.RESET_COMMENTS,(function(e){e.comments=[]})),Object(o.a)(S,c.BTN_SHOW_PICTURE,(function(e,t){e.isOpen=t})),S),k=(O={},Object(o.a)(O,c.GET_COMMENTS,(x=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,R.getComments(r);case 3:return o=e.sent,n(c.GET_COMMENTS,o.data),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return x.apply(this,arguments)})),Object(o.a)(O,c.SEND_COMMENTS,(T=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.commit,e.next=3,R.sendComment(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return T.apply(this,arguments)})),Object(o.a)(O,c.GET_IMAGES,(E=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,w.a.getImage(r);case 3:return o=e.sent,n(c.GET_IMAGES,o.data),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return E.apply(this,arguments)})),Object(o.a)(O,c.RESET_IMAGES,(function(e){return(0,e.commit)(c.RESET_IMAGES),null})),Object(o.a)(O,c.LOAD_COMMENT_AVATARS,(_=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,o,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,o=n.comments.map((function(e){return e.from})),e.next=4,y.a.getUserInfo(o);case 4:return f=e.sent,r(c.LOAD_COMMENT_AVATARS,f.data),e.abrupt("return",f);case 7:case"end":return e.stop()}}),e)}))),function(e){return _.apply(this,arguments)})),Object(o.a)(O,c.RESET_COMMENTS,(function(e){return(0,e.commit)(c.RESET_COMMENTS),null})),Object(o.a)(O,c.BTN_SHOW_PICTURE,(function(e,t){return(0,e.commit)(c.BTN_SHOW_PICTURE,t),null})),O),A={};t.default={state:I,getters:A,actions:k,mutations:j}},23:function(e,t,r){"use strict";r.r(t),r.d(t,"GET_COMMENTS",(function(){return n})),r.d(t,"SEND_COMMENTS",(function(){return o})),r.d(t,"GET_IMAGES",(function(){return c})),r.d(t,"LOAD_COMMENT_AVATARS",(function(){return f})),r.d(t,"RESET_IMAGES",(function(){return l})),r.d(t,"RESET_COMMENTS",(function(){return d})),r.d(t,"BTN_SHOW_PICTURE",(function(){return m}));var n="GET_COMMENTS",o="SEND_COMMENTS",c="GET_IMAGES",f="LOAD_COMMENT_AVATARS",l="RESET_IMAGES",d="RESET_COMMENTS",m="BTN_SHOW_PICTURE"},238:function(e,t,r){"use strict";r(58);var n={computed:{description:function(){return"/login"==this.$router.currentRoute.path?"Вход":"Регистрация"}},mounted:function(){var e=this;setTimeout((function(){e.$vuetify.theme.dark=JSON.parse(localStorage.getItem("isDark"))||!0}),0)}},o=(r(291),r(45)),c=r(50),f=r.n(c),l=r(364),component=Object(o.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("div",{staticClass:"auth-outer-container"},[t("div",{staticClass:"auth-inner-container d-flex flex-column"},[t("div",{staticClass:"background-container"},[t("img",{staticClass:"back",attrs:{src:r(288)}}),this._v(" "),t("img",{staticClass:"front",attrs:{src:r(289)}})]),this._v(" "),t("div",{staticClass:"auth__logo"},[t("img",{attrs:{src:r(290),alt:"auth__logo"}})]),this._v(" "),t("div",{staticClass:"auth__content d-flex justify-center align-center"},[t("nuxt")],1)])])])}),[],!1,null,"07e88c57",null);t.a=component.exports;f()(component,{VApp:l.a})},239:function(e,t,r){"use strict";r(51),r(58);var n=r(164),o=r(165),c={components:{FooterMenu:n.default,AppHeader:o.default},mounted:function(){var e=this;setTimeout((function(){e.$vuetify.theme.dark=JSON.parse(localStorage.getItem("isDark"))||!1}),0)},computed:{headerData:function(){return"/tag"===this.$route.path?{title:this.$store.state.messages.title}:this.$route.matched.map((function(e){return e.components.default.options.headerData}))[0]},btnValue:function(){return this.$route.matched.map((function(e){return e.components.default.options.btnValue}))[0]}}},f=(r(334),r(45)),l=r(50),d=r.n(l),m=r(364),h=r(366),component=Object(f.a)(c,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{dark:""}},[t("v-container",{staticStyle:{"margin-bottom":"56px",padding:"0","max-width":"900px"}},[t("app-header",{attrs:{"header-data":this.headerData}}),this._v(" "),t("nuxt")],1),this._v(" "),t("footer-menu",{attrs:{btnValue:this.btnValue}})],1)}),[],!1,null,"561f4dc6",null);t.a=component.exports;d()(component,{AppHeader:r(165).default,FooterMenu:r(164).default}),d()(component,{VApp:m.a,VContainer:h.a})},252:function(e,t,r){r(253),e.exports=r(254)},270:function(e,t,r){"use strict";r.r(t),t.default=function(e){var t=e.redirect,r=e.store;localStorage.getItem("firstSeenSlider")==r.state.auth.username&&t("/permissions")}},271:function(e,t,r){"use strict";r.r(t),t.default=function(e){var t=e.redirect;localStorage.getItem("accessToken")||t("/login")}},272:function(e,t,r){"use strict";r.r(t),t.default=function(e){var t=e.redirect;if(!/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"!=e.state&&t("/permissions")}))}},273:function(e,t,r){"use strict";r.r(t),t.default=function(e){var t=e.redirect;return navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"==e.state&&t("/home")}))}},274:function(e,t,r){"use strict";r.r(t),t.default=function(e){var t=e.redirect;localStorage.getItem("accessToken")?t("/home"):t("/login")}},275:function(e,t,r){"use strict";r.r(t),t.default=function(e){var t=e.redirect;localStorage.getItem("accessToken")&&t("/home")}},282:function(e,t,r){"use strict";var n=r(131);r.n(n).a},283:function(e,t,r){(t=r(24)(!1)).push([e.i,"h1[data-v-d0680786]{font-size:20px}",""]),e.exports=t},288:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYwIiBoZWlnaHQ9IjE2OSIgdmlld0JveD0iMCAwIDM2MCAxNjkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMCAwSDM2MFYxNjlDODUuNSAxNTEuODcyIDEyMy41IDQ1LjI5NSAwIDE2OVYwWiIgZmlsbD0iI0U4NUY4MSIvPg0KPC9zdmc+DQo="},289:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQyIiBoZWlnaHQ9IjE1MiIgdmlld0JveD0iMCAwIDM0MiAxNTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMzMyLjc0NiAxNTJDMjU3Ljg3NiAxMjAuNTg0IDE4OS43MjQgMTA2Ljk0MyAwIDkyLjkzNEwzNDIgMEwzMzIuNzQ2IDE1MloiIGZpbGw9IiNFRDY0NUUiLz4NCjwvc3ZnPg0K"},290:function(e,t,r){e.exports=r.p+"img/logo.ae827f1.svg"},291:function(e,t,r){"use strict";var n=r(133);r.n(n).a},292:function(e,t,r){(t=r(24)(!1)).push([e.i,".auth__logo[data-v-07e88c57]{position:fixed;top:1rem;left:1rem}.auth-inner-container[data-v-07e88c57]{width:100%;height:100vh;overflow:hidden}.auth-outer-container[data-v-07e88c57]{height:100%}.auth-outer-container[data-v-07e88c57],.background-container[data-v-07e88c57]{width:100%;position:relative}.back[data-v-07e88c57]{width:100%}.front[data-v-07e88c57]{position:absolute;top:0;right:-5%;width:130%}.auth__content[data-v-07e88c57]{width:100%;padding:1rem;position:relative}@media only screen and (max-height:550px){.background-container[data-v-07e88c57]{display:none}.auth-inner-container[data-v-07e88c57]{justify-content:center;align-content:center;height:100%;overflow-y:visible}}@media only screen and (max-height:550px) and (orientation:landscape){.auth__content[data-v-07e88c57]{position:static}}@media only screen and (max-height:768px) and (orientation:landscape){.auth-inner-container[data-v-07e88c57]{height:100%;overflow-y:visible}}@media only screen and (min-width:600px) and (orientation:portreit){.auth__content[data-v-07e88c57],.background-container[data-v-07e88c57]{top:-15%}}@media only screen and (min-width:768px){.auth__content[data-v-07e88c57],.background-container[data-v-07e88c57]{top:-15%}}@media only screen and (min-width:992px){.auth__content[data-v-07e88c57],.background-container[data-v-07e88c57]{top:-25%}}@media only screen and (min-width:1200px){.auth__content[data-v-07e88c57],.background-container[data-v-07e88c57]{top:-45%}}",""]),e.exports=t},293:function(e,t,r){"use strict";var n=r(134);r.n(n).a},294:function(e,t,r){(t=r(24)(!1)).push([e.i,".footer-menu[data-v-6a09f0e3]{box-shadow:0 0 7px rgba(0,0,0,.3);z-index:100;position:relative;display:flex;overflow:hidden;position:fixed;bottom:0;width:100%}.footer-menu_btns[data-v-6a09f0e3]{display:flex;justify-content:space-around}.footer-menu_container[data-v-6a09f0e3]{max-width:900px;width:100%;height:100%;display:flex;justify-content:space-evenly;align-items:center}@media screen and (max-width:350px){span[data-v-6a09f0e3]{display:none}.v-item-group.v-bottom-navigation .v-btn[data-v-6a09f0e3]{min-width:none}.v-btn:not(.v-btn--round).v-size--default[data-v-6a09f0e3]{min-width:0;padding:0}}",""]),e.exports=t},322:function(e,t,r){"use strict";var n=r(135);r.n(n).a},323:function(e,t,r){(t=r(24)(!1)).push([e.i,".header-title_subtitle[data-v-0790f288]{display:flex;justify-content:space-around;font-size:14px;line-height:16px;color:#fff}.header-title[data-v-0790f288]{color:#fff}",""]),e.exports=t},334:function(e,t,r){"use strict";var n=r(136);r.n(n).a},335:function(e,t,r){(t=r(24)(!1)).push([e.i,".header[data-v-561f4dc6]{position:relative;z-index:100;display:flex;overflow:hidden;position:fixed;top:0;width:100%}.theme--dark.v-application[data-v-561f4dc6]{background-color:#292929!important;background-color:var(--v-background-base,#292929)!important}.theme--light.v-application[data-v-561f4dc6]{background-color:#f9f9f9!important;background-color:var(--v-background-base,#f9f9f9)!important}",""]),e.exports=t},336:function(e,t,r){"use strict";r.r(t);var n=r(84),o=r(166),c=r(162),f=r(163),l=r(167);t.default=function(){return new n.a.Store({namespaced:!0,modules:{auth:o.default,messages:c.default,userInfo:f.default,currentTag:l.default}})}},34:function(e,t,r){"use strict";r.r(t),r.d(t,"SEND_MESSAGE",(function(){return n})),r.d(t,"GET_MESSAGES",(function(){return o})),r.d(t,"LOAD_AVATARS",(function(){return c})),r.d(t,"GET_TOP_MESSAGES",(function(){return f})),r.d(t,"CHANGE_LIST_TITLE",(function(){return l})),r.d(t,"SET_SORTED_MESSAGES",(function(){return d}));var n="SEND_MESSAGE",o="GET_MESSAGES",c="LOAD_AVATARS",f="GET_TOP_MESSAGES",l="CHANGE_LIST_TITLE",d="SET_SORTED_MESSAGES"},38:function(e,t,r){"use strict";r.r(t),r.d(t,"AUTH_LOGIN",(function(){return n})),r.d(t,"LOGIN_SUCCESS",(function(){return o})),r.d(t,"AUTH_SIGNUP",(function(){return c})),r.d(t,"SIGNUP_CONFIRM",(function(){return f})),r.d(t,"AUTH_LOGOUT",(function(){return l})),r.d(t,"RESET_PASSWORD_ATTEMPT",(function(){return d})),r.d(t,"RESET_PASSWORD_CONFIRM",(function(){return m}));var n="AUTH_LOGIN",o="LOGIN_SUCCESS",c="AUTH_SIGNUP",f="SIGNUP_CONFIRM",l="AUTH_LOGOUT",d="RESET_PASSWORD",m="RESET_PASSWORD_CONFIRM"},55:function(e,t,r){"use strict";r.r(t),r.d(t,"GET_USER_INFO",(function(){return n})),r.d(t,"SEND_USER_INFO",(function(){return o})),r.d(t,"SEND_USER_PHOTO",(function(){return c})),r.d(t,"SET_AUTH_DATA",(function(){return f}));var n="GET_USER_INFO",o="SEND_USER_INFO",c="SEND_USER_PHOTO",f="SET_AUTH_DATA"},77:function(e,t,r){"use strict";var n={layout:"empty",props:{error:{type:Object,default:null}},data:function(){return{pageNotFound:"404 Not Found",otherError:"An error occurred"}},head:function(){return{title:404===this.error.statusCode?this.pageNotFound:this.otherError}}},o=(r(282),r(45)),c=r(50),f=r.n(c),l=r(364),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{dark:""}},[404===e.error.statusCode?r("h1",[e._v("\n    "+e._s(e.pageNotFound)+"\n  ")]):r("h1",[e._v("\n    "+e._s(e.otherError)+"\n  ")]),e._v(" "),r("NuxtLink",{attrs:{to:"/"}},[e._v("\n    Home page\n  ")])],1)}),[],!1,null,"d0680786",null);t.a=component.exports;f()(component,{VApp:l.a})},78:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));r(32),r(30),r(7),r(36);var n=r(2),o=r(10),c=r(20),f=r(56),l=r.n(f),d="https://nexttomeapi.azurewebsites.net/api",m=l.a.create({baseURL:d});m.interceptors.response.use((function(e){return e}),(function(e){if(401!==e.response.status||!e.response.headers["token-expired"])return Promise.reject(e.response.status);var t={accessToken:localStorage.getItem("accessToken"),refreshToken:localStorage.getItem("refreshToken")};return l.a.post("".concat(d,"/auth/refresh"),t).then((function(t){return localStorage.setItem("accessToken",t.data.accessToken),localStorage.setItem("refreshToken",t.data.refreshToken),localStorage.setItem("nextId",t.data.id),m.defaults.headers.Authorization="Bearer ".concat(t.data.accessToken),e.response.config.headers.Authorization="Bearer ".concat(t.data.accessToken),l()(e.response.config)})).catch((function(e){return console.log(e),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("nextId"),delete m.defaults.headers.Authorization,Promise.reject(e.response.status)}))}));var h=m,v=function(){function e(){Object(o.a)(this,e),this.axios=h,this.updateAuthHeader(localStorage.getItem("accessToken"))}var t,r;return Object(c.a)(e,[{key:"request",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var data,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return data=o.length>2&&void 0!==o[2]?o[2]:{},e.next=3,this.axios[t](r,data);case 3:if(200==(n=e.sent).status){e.next=6;break}throw new Error(n.status);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"updateAuthHeader",value:function(e){this.axios.defaults.headers.Authorization="Bearer ".concat(e)}},{key:"getLocationInfo",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r,n,o,c,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.geolocation){e.next=4;break}throw new Error("У вас не разрешен доступ к геолокации!");case 4:return e.next=6,this._getPosition();case 6:if(t=e.sent,r=t.coords,n=r.latitude,o=r.longitude,c=localStorage.getItem("latitude"),f=localStorage.getItem("longitude"),!(Math.abs(o-f)<.01&&Math.abs(n-c)<.01&&localStorage.getItem("currentPlace"))){e.next=16;break}return e.abrupt("return",{location:{latitude:parseFloat(c),longitude:parseFloat(f)},place:localStorage.getItem("currentPlace")});case 16:return localStorage.setItem("latitude",n),localStorage.setItem("longitude",o),e.next=20,l.a.get("https://geocode-maps.yandex.ru/1.x/?apikey=".concat("45ccaf60-7908-468d-adde-66b6dca72de5","&format=json&geocode=").concat(o,",").concat(n,"&kind=locality&results=1"));case 20:return d=e.sent,localStorage.setItem("currentPlace",d.data.response.GeoObjectCollection.featureMember[0].GeoObject.name),e.abrupt("return",{location:{latitude:n,longitude:o},place:d.data.response.GeoObjectCollection.featureMember[0].GeoObject.name});case 23:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_getPosition",value:function(){return new Promise((function(e,t,r){navigator.geolocation.getCurrentPosition(e,t,r)}))}}]),e}()},85:function(e,t,r){"use strict";r(7),r(54),r(12),r(36);var n=r(2),o=r(10),c=r(20),f=r(21),l=r(13),d=r(6);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var h=function(e){Object(f.a)(v,e);var t,r,l,d,h=m(v);function v(){return Object(o.a)(this,v),h.call(this)}return Object(c.a)(v,[{key:"sendUserInfo",value:(d=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/user/information/send",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getUserInfo",value:(l=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/user/information/get",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getMyTagsIds",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/messages/get/from/user");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getMyTag",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/messages/get/from/ids",[t]);case 2:return r=e.sent,e.abrupt("return",r.data[0]);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),v}(r(78).a);t.a=new h},92:function(e,t,r){"use strict";r(11),r(18),r(16),r(27),r(28),r(19),r(7),r(54),r(12),r(17);var n=r(0),o=(r(36),r(2)),c=r(10),f=r(20),l=r(21),d=r(13),m=r(6);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(m.a)(e);if(t){var o=Object(m.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var O=function(e){Object(l.a)(x,e);var t,r,n,d,m,h,O,_,E,T=S(x);function x(){return Object(c.a)(this,x),T.call(this)}return Object(f.a)(x,[{key:"sendMessage",value:(E=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocationInfo();case 2:return r=e.sent,t=v(v({},t),r),e.next=6,this.request("post","/messages/send",t);case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"getMessages",value:(_=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,n,o,c,f,l,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:0,r=d.length>1&&void 0!==d[1]?d[1]:10,n=d.length>2&&void 0!==d[2]?d[2]:1e3,e.next=5,this.getLocationInfo();case 5:return o=e.sent,c=o.location,f={currentLocation:{latitude:c.latitude,longitude:c.longitude},skip:t,take:r,gettingMessagesRadiusInMeters:n},e.next=10,this.request("post","/messages/get",f);case 10:return l=e.sent,e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"getTopMessages",value:(O=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,n,o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:0,r=c.length>1&&void 0!==c[1]?c[1]:10,n={skip:t,take:r},e.next=5,this.request("post","/messages/top",n);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"likeMessage",value:(h=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/messages/like?messageId=".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"unlikeMessage",value:(m=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/messages/like/remove?messageId=".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getImage",value:(d=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/messages/image/get?messageImageId=".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getIDsMessages",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/messages/get/from/user");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getUserMessages",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/messages/get/from/user",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"updateViews",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("post","/messages/views",[t]);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),x}(r(78).a);t.a=new O}},[[252,20,4,21]]]);